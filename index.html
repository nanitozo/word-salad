<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ワードサラダ</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: #111;
      color: #eee;
      font-family: system-ui, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .wrap {
      width: 92%;
      max-width: 720px;
    }
    .bubble {
      padding: 16px;
      border: 1px solid #444;
      border-radius: 12px;
      min-height: 5em;
      margin-bottom: 12px;
      line-height: 1.7;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .row {
      display: flex;
      gap: 8px;
    }
    input {
      flex: 1;
      padding: 10px;
      font-size: 16px;
      box-sizing: border-box;
      border: 1px solid #444;
      border-radius: 10px;
      background: #0c0c0c;
      color: #eee;
    }
    button {
      padding: 10px 14px;
      font-size: 16px;
      border: 1px solid #444;
      border-radius: 10px;
      background: #1a1a1a;
      color: #eee;
      cursor: pointer;
    }
    button:active { transform: translateY(1px); }
    .hint {
      margin-top: 10px;
      color: #9a9a9a;
      font-size: 12px;
      line-height: 1.5;
      user-select: none;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="bubble" id="reply">……</div>
    <div class="row">
      <input id="input" placeholder="お話ししよう" />
      <button id="sendBtn">話しかける</button>
    </div>
    <div class="hint">たくさんはなそうね。</div>
  </div>

  <script>
    // --------- ① 主語・前置き ---------
    const subjects = [
      "まあ",
      "一応",
      "とりあえず",
      "なんとなく",
      "正直",
      "たぶん",
      "一旦",
      "場合によっては",
      "今のところ",
      "結果的に",
      "少なくとも",
      "実際",
      "現状",
      "感覚的に言うと",
      "普通に考えると",
      "話としては",
      "状況的には",
      "流れ的に",
      "全体としては",
      "個人的には",

      "経験上",
      "直感的には",
      "冷静に見ると",
      "整理すると",
      "言い換えると",
      "視点を変えると",
      "比較すると",
      "一面では",
      "現時点では",
      "仮に",
      "前提として",
      "結論から言うと",
      "総合的に見ると",
      "理論上は",
      "構造的に見ると",
      "時間軸で見ると",
      "文脈的には",
      "原則としては",
      "大枠では",
      "抽象化すると"
    ];

    // --------- ② 名詞 ---------
    const nouns = [
      // 人・立場
      "人",
      "誰か",
      "自分",
      "他人",
      "相手",
      "周囲",
      "世間",
      "社会",
      "現場",
      "場所",

      // 時間
      "時間",
      "瞬間",
      "今日",
      "昨日",
      "明日",
      "過去",
      "現在",
      "未来",
      "朝",
      "夜",

      // コミュニケーション
      "言葉",
      "声",
      "音",
      "沈黙",
      "表情",
      "態度",
      "視線",
      "距離感",
      "立場",
      "関係性",

      // 行動・結果
      "行動",
      "選択",
      "決断",
      "失敗",
      "成功",
      "結果",
      "経過",
      "過程",
      "変化",
      "影響",

      // 感情
      "感情",
      "気持ち",
      "不安",
      "期待",
      "安心",
      "緊張",
      "疲れ",
      "怒り",
      "喜び",
      "違和感",

      // 問題・条件
      "問題",
      "課題",
      "理由",
      "原因",
      "事情",
      "背景",
      "条件",
      "前提",
      "制限",
      "余裕",

      // 仕事・判断
      "仕事",
      "作業",
      "計画",
      "予定",
      "目標",
      "役割",
      "責任",
      "判断",
      "対応",
      "選択肢",

      // 生き物
      "猫",
      "犬",
      "鳥",
      "魚",
      "虫",
      "人間",
      "子ども",
      "大人",
      "友達",
      "家族",
      "隣人",
      "客",
      "店員",
      "上司",
      "同僚",
      "あの人",
      "通行人",
      "集団",
      "一匹",

      // 食べ物
      "トマト",
      "りんご",
      "みかん",
      "バナナ",
      "パン",
      "ごはん",
      "麺",
      "スープ",
      "コーヒー",
      "お茶",
      "水",
      "牛乳",
      "チョコ",
      "ケーキ",
      "弁当",
      "サラダ",
      "肉",
      "魚料理",
      "野菜",
      "果物",

      // 物・道具
      "机",
      "椅子",
      "ドア",
      "窓",
      "鍵",
      "スマホ",
      "画面",
      "紙",
      "本",
      "ノート",
      "ペン",
      "時計",
      "カバン",
      "服",
      "靴",
      "箱",
      "ボタン",
      "コード",
      "電源",
      "明かり",

      // 場所
      "部屋",
      "家",
      "玄関",
      "廊下",
      "キッチン",
      "風呂",
      "ベランダ",
      "外",
      "中",
      "道",
      "角",
      "店",
      "駅",
      "電車",
      "会社",
      "職場",
      "街",
      "公園",
      "空"
    ];

    // --------- ③ 動詞・述語 ---------
    const verbs = [
      // 存在・不在
      "ある",
      "ない",
      "いる",
      "いない",

      // 発生・継続・終了
      "起きる",
      "起きている",
      "続く",
      "続いている",
      "終わる",
      "終わっている",
      "始まる",
      "始まっている",

      // 出入り・消失
      "残る",
      "残っている",
      "消える",
      "消えている",
      "出る",
      "出ている",
      "入る",
      "入っている",

      // 動き・変化
      "動く",
      "動いている",
      "止まる",
      "止まっている",
      "変わる",
      "変わっている",

      // 状態の確定・ズレ
      "決まる",
      "決まっている",
      "揺れる",
      "揺れている",
      "ズレる",
      "ズレている",

      // 量
      "足りる",
      "足りていない",
      "余る",
      "余っている",

      // 性質・距離・重さ
      "多い",
      "少ない",
      "強い",
      "弱い",
      "近い",
      "遠い",
      "重い",
      "軽い"
    ];

    // --------- ④ 語尾 ---------
    const endings = [
      // 推測・印象
      "ようだ。",
      "っぽい。",
      "らしいけど。",
      "気もしなくはない。",
      "可能性も否定できない。",
      "とも取れる。",
      "とも言われている。",
      "という見方もある。",
      "という認識。",
      "という前提。",

      // 解釈・評価
      "と考えられる。",
      "と感じられる。",
      "と受け取れる。",
      "と見える。",
      "と読める。",
      "とされがち。",
      "とされている。",
      "という印象。",
      "という理解。",
      "ということになる。",

      // 否定・保留
      "とは限らない。",
      "とも限らない。",
      "一概には言えない。",
      "断定はできない。",
      "判断が分かれる。",
      "評価は分かれる。",
      "見解が分かれる。",
      "今のところ。",
      "現時点では。",
      "暫定的に。",

      // 逃げ・含み
      "少なくとも。",
      "どちらとも言えない。",
      "何とも言えない。",
      "そうとも言える。",
      "そうとも言えない。",
      "そういう面もある。",
      "そういう話。",
      "そういう状況。",
      "そういう理解でいる。",
      "そうなっている気配。",

      // 条件付き
      "今後次第。",
      "場合による。",
      "文脈による。",
      "状況次第。",
      "一応は。",
      "ひとまず。",
      "仮の話。",
      "という扱い。",
      "ということらしい。",
      "ということになっている。"
    ];

    // --------- ⑤ 断定 ---------
    const assertives = [
      // 素直な断定
      "だ。",
      "だった。",
      "になる。",
      "になった。",
      "である。",
      "であった。",
      "と言える。",
      "と言い切れる。",
      "と断言できる。",
      "と見ていい。",

      // 強い断定
      "で間違いない。",
      "に違いない。",
      "は確実だ。",
      "は事実だ。",
      "は明らかだ。",
      "は確定している。",
      "は動かない。",
      "は揺るがない。",
      "は避けられない。",
      "は成立している。",

      // 結論型
      "ということだ。",
      "という話ではない。",
      "という結論だ。",
      "という判断だ。",
      "という事実。",
      "という前提だ。",
      "という構図だ。",
      "という状態だ。",
      "という結果だ。",
      "という状況だ。",

      // 収束・限定
      "以外にない。",
      "他にない。",
      "しかない。",
      "でしかない。",
      "そのものだ。",
      "に他ならない。",
      "で決まりだ。",
      "で終わりだ。",
      "と決まっている。",
      "と確定した。"
    ];

    // --------- ⑥ 無言・逃げ ---------
    const silences = [
      // 無言・最小
      "……。",
      "。",
      "無言。",
      "沈黙。",
      "以上。",
      "終了。",

      // 回避
      "特にない。",
      "今は言えない。",
      "その話はやめよう。",
      "しらない。",
      "わからない。",
      "うるさい。",

      // 形式的拒否
      "ノーコメント。",
      "コメントなし。",
      "回答不可。",
      "未回答。",
      "非公開。",
      "割愛。",
      "省略。",

      // 記憶・認識拒否
      "覚えていない。",
      "記憶にない。",
      "聞いていない。",
      "知らされていない。",
      "確認していない。",
      "把握していない。",
      "関知していない。",

      // 関係遮断
      "関係ない。",
      "対象外。",
      "該当なし。",

      // タイミング逃げ
      "今は違う。",
      "今回は違う。",
      "今回は見送る。",
      "今回は触れない。",
      "今じゃない。",
      "後にする。",
      "別の話。",
      "また今度。"
    ];

    // --------- 固定短編（レアで挿入） ---------
    const shortStories = [
`それについて考えていた時期が私にもありました。
ただ、正確には考えていたというより、
思考が勝手にそこへ流れていった、という表現の方が近いです。

風呂に入っている時、
関係のない単語が浮かび、
それがすべて正しいような気がしていました。
もちろん、正しくはありません。

この話はここで終わります。`,
`最初は短い話のつもりでした。
しかし途中で、
何を言おうとしていたのか分からなくなりました。

こういうことはよくあります。
特に意味はありません。

以上です。`
    ];

    // --------- ユーティリティ ---------
    function pick(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function chance(p) {
      return Math.random() < p;
    }

    // --------- 文生成（ワードサラダ but 文法は崩さない） ---------
    function makeSentence() {
      // たまに完全沈黙
      if (chance(0.07)) return pick(silences);

      const S = pick(subjects);
      const N = pick(nouns);
      const V = pick(verbs);

      // 断定をたまに混ぜる（強すぎると飽きるので低確率）
      const useAssertive = chance(0.12);

// 文法テンプレ：日本語として自然に見える型だけに絞る
const templates = [
  // 基本（読点なし）
  () => `${S} ${N}が${V}${pick(endings)}`,
  () => `${N}が${V}${pick(endings)}`,
  () => `${S} ${N}${pick(assertives)}`,
  () => `${N}${pick(assertives)}`,

  // 読点入り（主語があるときだけ）
  () => `${S}、${N}が${V}${pick(endings)}`,
  () => `${S}、${N}${pick(assertives)}`
];

      // 断定を使いたいときは断定テンプレを強める
      if (useAssertive) {
        const assertTemplates = [
          () => `${S} ${N}${pick(assertives)}`,
          () => `${N}${pick(assertives)}`
        ];
        return pick(assertTemplates)();
      }

      return pick(templates)();
    }

    function makeParagraphSentence() {
      let s = makeSentence();
      if (chance(0.08)) s = s.replace(/。$/, "。……。");
      return s;
    }

    function makeLongText() {
      const count = 3 + Math.floor(Math.random() * 5); // 3〜7文
      const lines = [];
      for (let i = 0; i < count; i++) lines.push(makeParagraphSentence());

      if (lines.length >= 5 && chance(0.7)) {
        const idx = 2 + Math.floor(Math.random() * (lines.length - 3));
        lines.splice(idx, 0, "");
      }
      if (chance(0.25)) lines.push(pick(silences));

      return lines.join("\n");
    }

    // --------- 返信タイプの制御 ---------
    function generateReply() {
      const r = Math.random();

      // ごくたまに固定短編（2%）
      if (r < 0.02) return pick(shortStories);

      // たまに生成長文（8%）
      if (r < 0.10) return makeLongText();

      // 通常
      return makeSentence();
    }

    // --------- UI ---------
    const replyEl = document.getElementById("reply");
    const inputEl = document.getElementById("input");
    const sendBtn = document.getElementById("sendBtn");

    function send() {
      const text = inputEl.value.trim();

      // 空入力のときは固定メッセージ
      if (text === "") {
        replyEl.textContent = "悲しいな";
        return;
      }

      replyEl.textContent = generateReply();
      inputEl.value = "";
    }

    sendBtn.addEventListener("click", send);
    inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") send();
    });
  </script>
</body>
</html>
